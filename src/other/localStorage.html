<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>localStorage</title>
</head>

<body>
    <h1>localStorage</h1>
    <button id="btn1">存储loaclStorage</button>
    <button id="btn2">读取loaclStorage</button>
    <button id="btn3">删除loaclStorage</button>
    <button id="btn4">清空loaclStorage</button>
    <script>
        (function() {
            const btn1 = document.getElementById("btn1");
            const btn2 = document.getElementById("btn2");
            const btn3 = document.getElementById("btn3");

            const p = {
                name: "xiaoming",
                age: "18"
            }

            btn1.onclick = () => {
                localStorage.setItem("name", JSON.stringify(p));
                localStorage.setItem("someString", "abcd");
            }
            btn2.onclick = () => {

                //尝试读取，如果没问题，则正常输出
                try {
                    let getP = localStorage.getItem("name");
                    console.log(JSON.parse(getP));
                } catch (err) {
                    //如果有问题，输出错误 然后删除
                    console.log(err.message);
                    localStorage.removeItem("name");
                }
            }
            btn3.onclick = () => {
                localStorage.removeItem("name");
            }
            btn4.onclick = () => {
                localStorage.clear();
            }

        })()
    </script>
</body>

</html>